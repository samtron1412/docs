<!DOCTYPE html>
<!-- saved from url=(0069)https://about.gitlab.com/2017/02/01/gitlab-dot-com-database-incident/ -->
<html lang="en" class="gr__about_gitlab_com"><script async="" src="https://s.swiftypecdn.com/install/v2/st.js"></script><script async="" src="https://connect.facebook.net/en_US/fbevents.js"></script><script async="" src="https://www.googletagmanager.com/gtm.js?id=GTM-NJXWQL"></script><script data-x-lastpass="">(function(){var c=0;if("undefined"!==typeof CustomEvent&&"function"===typeof window.dispatchEvent){var a=function(a){try{if("object"===typeof a&&(a=JSON.stringify(a)),"string"===typeof a)return window.dispatchEvent(new CustomEvent("lprequeststart",{detail:{data:a,requestID:++c}})),c}catch(f){}},b=function(a){try{window.dispatchEvent(new CustomEvent("lprequestend",{detail:a}))}catch(f){}};"undefined"!==typeof XMLHttpRequest&&XMLHttpRequest.prototype&&XMLHttpRequest.prototype.send&&(XMLHttpRequest.prototype.send=
function(c){return function(f){var d=this,e=a(f);e&&d.addEventListener("loadend",function(){b({requestID:e,statusCode:d.status})});return c.apply(d,arguments)}}(XMLHttpRequest.prototype.send));"function"===typeof fetch&&(fetch=function(c){return function(f,d){var e=a(d),g=c.apply(this,arguments);if(e){var h=function(a){b({requestID:e,statusCode:a&&a.status})};g.then(h)["catch"](h)}return g}}(fetch))}})();
(function(){if("undefined"!==typeof CustomEvent){var c=function(a){if(a.lpsubmit)return a;var b=function(){try{this.dispatchEvent(new CustomEvent("lpsubmit"))}catch(k){}return a.apply(this,arguments)};b.lpsubmit=!0;return b};window.addEventListener("DOMContentLoaded",function(){if(document&&document.forms&&0<document.forms.length)for(var a=0;a<document.forms.length;++a)document.forms[a].submit=c(document.forms[a].submit)},!0);document.createElement=function(a){return function(){var b=a.apply(this,
arguments);b&&"FORM"===b.nodeName&&b.submit&&(b.submit=c(b.submit));return b}}(document.createElement)}})();
</script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  <meta content="width=device-width, initial-scale=1.0" name="viewport"> <title> GitLab.com Database Incident | GitLab </title> <meta content="Yesterday we had a serious incident with one of our databases. We lost 6 hours of database data (issues, merge requests, users, comments, snippets, etc.) for GitLab.com." name="description"> <meta content="Yesterday we had a serious incident with one of our databases. We lost 6 hours of database data (issues, merge requests, users, comments, snippets, etc.) for GitLab.com." name="twitter:description"> <meta content="Yesterday we had a serious incident with one of our databases. We lost 6 hours of database data (issues, merge requests, users, comments, snippets, etc.) for GitLab.com." name="og:description"> <meta content="GitLab" property="og:site_name"> <meta content="GitLab.com Database Incident" property="og:title"> <meta content="article" property="og:type"> <meta content="https://about.gitlab.com/2017/02/01/gitlab-dot-com-database-incident/" property="og:url"> <meta content="https://about.gitlab.com/images/blogimages/gitlab-blog-cover.png" property="og:image"> <meta content="https://about.gitlab.com/images/blogimages/gitlab-blog-cover.png" name="twitter:image"> <meta content="summary_large_image" name="twitter:card"> <meta content="@GitLab" name="twitter:site"> <meta content="GitLab.com Database Incident" name="twitter:title"> <meta content="@GitLab" name="twitter:creator"> <link href="https://about.gitlab.com/atom.xml" rel="alternate" title="Blog" type="application/atom+xml"> <link href="https://about.gitlab.com/ico/favicon.ico" rel="shortcut icon"> <link href="https://about.gitlab.com/ico/apple-touch-icon-57x57.png" rel="apple-touch-icon" sizes="57x57"> <link href="https://about.gitlab.com/ico/apple-touch-icon-114x114.png" rel="apple-touch-icon" sizes="114x114"> <link href="https://about.gitlab.com/ico/apple-touch-icon-72x72.png" rel="apple-touch-icon" sizes="72x72"> <link href="https://about.gitlab.com/ico/apple-touch-icon-144x144.png" rel="apple-touch-icon" sizes="144x144"> <link href="https://about.gitlab.com/ico/apple-touch-icon-60x60.png" rel="apple-touch-icon" sizes="60x60"> <link href="https://about.gitlab.com/ico/apple-touch-icon-120x120.png" rel="apple-touch-icon" sizes="120x120"> <link href="https://about.gitlab.com/ico/apple-touch-icon-76x76.png" rel="apple-touch-icon" sizes="76x76"> <link href="https://about.gitlab.com/ico/apple-touch-icon-152x152.png" rel="apple-touch-icon" sizes="152x152"> <link href="https://about.gitlab.com/ico/apple-touch-icon-180x180.png" rel="apple-touch-icon" sizes="180x180"> <link href="https://about.gitlab.com/ico/favicon-192x192.png" rel="icon" sizes="192x192" type="image/png"> <link href="https://about.gitlab.com/ico/favicon-160x160.png" rel="icon" sizes="160x160" type="image/png"> <link href="https://about.gitlab.com/ico/favicon-96x96.png" rel="icon" sizes="96x96" type="image/png"> <link href="https://about.gitlab.com/ico/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"> <link href="https://about.gitlab.com/ico/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"> <meta content="#554488" name="msapplication-TileColor"> <meta content="/ico/mstile-144x144.png" name="msapplication-TileImage"> <meta content="/ico/browserconfig.xml" name="msapplication-config"> <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet"> <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"> <script>
  var _vwo_code=(function(){
  var account_id=275624,
  settings_tolerance=2000,
  library_tolerance=2500,
  use_existing_jquery=false,
  /* DO NOT EDIT BELOW THIS LINE */
  f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
</script><script src="https://dev.visualwebsiteoptimizer.com/j.php?a=275624&amp;u=https%3A%2F%2Fabout.gitlab.com%2F2017%2F02%2F01%2Fgitlab-dot-com-database-incident%2F&amp;r=0.6631053855022175" type="text/javascript"></script> <link href="./GitLab.com Database Incident _ GitLab_files/styles.css" rel="stylesheet"><link href="./GitLab.com Database Incident _ GitLab_files/highlight.css" rel="stylesheet"> <script type="text/javascript" async="" src="https://gitlab.disqus.com/embed.js"></script><script type="text/javascript" charset="utf-8" async="" src="https://platform.twitter.com/js/tweet.08991409fe8c7862c0aa5cc77e44569a.js"></script><link rel="stylesheet" type="text/css" href="https://s.swiftypecdn.com/assets/new_embed-59af57b2801d7d8cca80ebe043cdcf80.css"><style type="text/css">.st-install-Z4n7msKyctXXfJs66EKx .st-ui-result .st-ui-type-heading { color:#0089d7 !important }
.st-install-Z4n7msKyctXXfJs66EKx .st-ui-result em {font-style:normal; font-weight:bold; background-color:#f6fcfe !important}</style></head> <body data-spy="scroll" data-target=".qnav" data-gr-c-s-loaded="true"> <noscript> &lt;iframe height=0 src='//www.googletagmanager.com/ns.html?id=GTM-NJXWQL' style='display:none;visibility:hidden' width=0&gt;&lt;/iframe&gt; </noscript> <script>
  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-NJXWQL')
</script> <header> <nav class="navbar navbar-fixed-top navbar-default" role="navigation"> <div class="container"> <div class="navbar-header"> <button class="navbar-toggle" data-target="#main-gl-nav" data-toggle="collapse" type="button"> <span class="sr-only"> Toggle Navigation </span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <button aria-label="Search" class="search-icon search-icon-mobile js-search-toggle visible-xs-block visible-sm-block pull-right" type="button"> <i class="fa fa-search"></i> </button> <a class="navbar-brand animated" href="https://about.gitlab.com/"> <svg width="140" height="44" viewBox="0 0 1231 342" xmlns="http://www.w3.org/2000/svg" class="nav-logo"> <g fill="none" fill-rule="evenodd"> <g fill="#8C929D" class="wordmark"> <path d="M764.367 94.13h-20.803l.066 154.74h84.155v-19.136h-63.352l-.066-135.603zM907.917 221.7c-5.2 5.434-13.946 10.87-25.766 10.87-15.838 0-22.22-7.797-22.22-17.957 0-15.354 10.637-22.678 33.332-22.678 4.255 0 11.11.472 14.655 1.18v28.586zm-21.51-93.787c-16.8 0-32.208 5.952-44.23 15.858l7.352 12.73c8.51-4.962 18.91-9.924 33.802-9.924 17.02 0 24.585 8.742 24.585 23.39v7.56c-3.31-.71-10.164-1.184-14.42-1.184-36.404 0-54.842 12.757-54.842 39.454 0 23.86 14.656 35.908 36.876 35.908 14.97 0 29.314-6.852 34.278-17.954l3.782 15.118h14.657v-79.14c0-25.04-10.874-41.815-41.84-41.815zM995.368 233.277c-7.802 0-14.657-.945-19.858-3.308v-71.58c7.093-5.908 15.84-10.16 26.95-10.16 20.092 0 27.893 14.174 27.893 37.09 0 32.6-12.53 47.957-34.985 47.957m8.742-105.364c-18.592 0-28.6 12.64-28.6 12.64V120.59l-.066-26.458H955.116l.066 150.957c10.164 4.25 24.11 6.613 39.24 6.613 38.768 0 57.442-24.804 57.442-67.564 0-33.783-17.26-56.227-47.754-56.227M538.238 110.904c18.438 0 30.258 6.142 38.06 12.285l8.938-15.477c-12.184-10.678-28.573-16.417-46.053-16.417-44.204 0-75.17 26.932-75.17 81.267 0 56.935 33.407 79.14 71.624 79.14 19.148 0 35.46-4.488 46.096-8.976l-.435-60.832V162.76h-56.734v19.135h36.167l.437 46.184c-4.727 2.362-13 4.252-24.11 4.252-30.73 0-51.297-19.32-51.297-60.006 0-41.34 21.275-61.422 52.478-61.422M684.534 94.13h-20.33l.066 25.988v89.771c0 25.04 10.874 41.814 41.84 41.814 4.28 0 8.465-.39 12.53-1.126v-18.245c-2.943.45-6.083.707-9.455.707-17.02 0-24.585-8.74-24.585-23.387v-61.895h34.04v-17.01H684.6l-.066-36.617zM612.62 248.87h20.33V130.747h-20.33v118.12zM612.62 114.448h20.33V94.13h-20.33v20.318z"></path> </g> <path d="M185.398 341.13l68.013-209.322H117.39L185.4 341.13z" fill="#E24329" class="logo-svg-shape logo-dark-orange-shape"></path> <path d="M185.398 341.13l-68.013-209.322h-95.32L185.4 341.128z" fill="#FC6D26" class="logo-svg-shape logo-orange-shape"></path> <path d="M22.066 131.808l-20.67 63.61c-1.884 5.803.18 12.16 5.117 15.744L185.398 341.13 22.066 131.807z" fill="#FCA326" class="logo-svg-shape logo-light-orange-shape"></path> <path d="M22.066 131.808h95.32L76.42 5.735c-2.107-6.487-11.284-6.487-13.39 0L22.065 131.808z" fill="#E24329" class="logo-svg-shape logo-dark-orange-shape"></path> <path d="M185.398 341.13l68.013-209.322h95.32L185.4 341.128z" fill="#FC6D26" class="logo-svg-shape logo-orange-shape"></path> <path d="M348.73 131.808l20.67 63.61c1.884 5.803-.18 12.16-5.117 15.744L185.398 341.13 348.73 131.807z" fill="#FCA326" class="logo-svg-shape logo-light-orange-shape"></path> <path d="M348.73 131.808h-95.32L294.376 5.735c2.108-6.487 11.285-6.487 13.392 0l40.963 126.073z" fill="#E24329" class="logo-svg-shape logo-dark-orange-shape"></path> </g> </svg> </a> </div> <div class="search-box js-search-box"> <i class="fa fa-search search-box-icon"></i> <input class="search-input js-search" placeholder="Search..."> <button aria-label="Close search" class="search-close js-search-toggle" type="button"> <i class="fa fa-times"></i> </button> </div> <div class="collapse navbar-collapse" id="main-gl-nav"> <ul class="nav navbar-nav animated"> <li class="visible-xs-block visible-sm-block"> <a class="sign-in-up-btn" href="https://gitlab.com/users/sign_in"> Sign In </a> </li> <li class="visible-xs-block visible-sm-block"> <a class="sign-in-up-btn is-last" href="https://gitlab.com/users/sign_in"> Sign Up </a> </li> <li> <a href="https://about.gitlab.com/downloads"> Download </a> </li> <li> <a href="https://about.gitlab.com/features"> Features </a> </li> <li> <a href="https://about.gitlab.com/products"> Products </a> </li> <li> <a href="https://about.gitlab.com/community"> Community </a> </li> <li> <a href="https://gitlab.com/explore"> Explore </a> </li> <li> <a href="https://docs.gitlab.com/"> Docs </a> </li> <li class="active"> <a href="https://about.gitlab.com/blog"> Blog </a> </li> <li> <a href="https://about.gitlab.com/contact"> Contact </a> </li> <li class="hidden-xs hidden-sm"> <button aria-label="Search" class="search-icon js-search-toggle" type="button"> <i class="fa fa-search"></i> </button> </li> <li class="hidden-xs hidden-sm"> <a class="sign-in-up-btn" href="https://gitlab.com/users/sign_in"> Sign In </a> </li> <li class="hidden-xs hidden-sm"> <a class="sign-in-up-btn is-last" href="https://gitlab.com/users/sign_in"> Sign Up </a> </li> </ul> </div> </div> </nav> </header> <div class="blog article"> <div class="cover" style="background-image: url(/images/default-blog-image.png);"> <div class="overlay"> <div class="wrapper header"> <span class="date"> Feb 1, 2017 </span> <span>-</span> <span class="author"> <a href="https://twitter.com/gitlab">GitLab</a> </span> <h1> GitLab.com Database Incident </h1> <p class="description"> Yesterday we had a serious incident with one of our databases. We lost 6 hours of database data (issues, merge requests, users, comments, snippets, etc.) for GitLab.com. </p> </div> </div> </div> <div class="wrapper body"> <div class="content"> <p>Yesterday we had a serious incident with one of our databases. We lost 6 hours of database data (issues, merge requests, users, comments, snippets, etc.) for GitLab.com. Git/wiki repositories and self hosted installations were not affected. Losing production data is unacceptable and in a few days we'll post the 5 why's of why this happened and a list of measures we will implement.</p> <p><em><strong>Update 18:14 UTC: GitLab.com is back online</strong></em></p> <p>As of time of writing, we’re restoring data from a 6-hours old backup of our database. This means that any data between 17:20 UTC and 23:25 UTC from the database (projects, issues, merge requests, users, comments, snippets, etc.) is lost by the time GitLab.com is live again.</p> <p><strong>Git data (repositories and wikis) and self-hosted instances of GitLab are not affected.</strong></p> <p>Read below for a brief summary of the events. You’re also welcome to view <a href="https://docs.google.com/document/d/1GCK53YDcBWQveod9kfzW-VCxIABGiryG7_z_6jHdVik/pub">our active postmortem doc</a>.</p> <h2 id="first-incident">First Incident</h2> <p>At 2017/01/31 18:00 UTC, we detected that spammers where hammering the database by creating snippets, making it unstable. We then started troubleshooting to understand what the problem was and how to fight it.</p> <p><img src="./GitLab.com Database Incident _ GitLab_files/snippets.png" alt=""></p> <p>At 2017/01/31 21:00 UTC, this escalated causing a lockup on writes on the database, this caused some downtime.</p> <p><img src="./GitLab.com Database Incident _ GitLab_files/locks.png" alt=""></p> <h3 id="actions-taken">Actions taken</h3> <ul> <li>We blocked the spammers based on IP address</li> <li>We removed a user for using a repository as some form of CDN, resulting in 47 000 IPs signing in using the same account (causing high DB load)</li> <li>We removed users for spamming (by creating snippets)</li> </ul> <h2 id="second-incident">Second Incident</h2> <p>At 2017/01/31 22:00 UTC - We got paged because DB Replication lagged too far behind, effectively stopping. This happened because there was a spike in writes that were not processed on time by the secondary database.</p> <p><img src="./GitLab.com Database Incident _ GitLab_files/used.png" alt=""></p> <p><img src="./GitLab.com Database Incident _ GitLab_files/rep_lag.png" alt=""></p> <h3 id="actions-taken-1">Actions taken</h3> <ul> <li>Attempts to fix <code>db2</code>, it’s lagging behind by about 4 GB at this point</li> <li><code>db2.cluster</code> refuses to replicate, <code>/var/opt/gitlab/postgresql/data</code> is wiped to ensure a clean replication</li> <li><code>db2.cluster</code> refuses to connect to <code>db1</code>, complaining about <code>max_wal_senders</code> being too low. This setting is used to limit the number of <code>WAL (= replication)</code> clients</li> <li><em>Team-member-1</em> adjusts <code>max_wal_senders</code> to <code>32</code> on <code>db1</code>, restarts PostgreSQL</li> <li>PostgreSQL complains about too many semaphores being open, refusing to start</li> <li><em>Team-member-1</em> adjusts <code>max_connections</code> to <code>2000</code> from <code>8000</code>, PostgreSQL starts again (despite <code>8000</code> having been used for almost a year)</li> <li><code>db2.cluster</code> still refuses to replicate, though it no longer complains about connections; instead it just hangs there not doing anything</li> <li>At this point frustration begins to kick in. Earlier this night <em>team-member-1</em> explicitly mentioned he was going to sign off as it was getting late (23:00 or so local time), but didn’t due to the replication problems popping up all of a sudden.</li> </ul> <h2 id="third-incident">Third Incident</h2> <p>At 2017/01/31 23:00-ish <em>team-member-1</em> thinks that perhaps <code>pg_basebackup</code> is refusing to work due to the PostgreSQL data directory being present (despite being empty), decides to remove the directory. After a second or two he notices he ran it on <code>db1.cluster.gitlab.com</code>, instead of <code>db2.cluster.gitlab.com</code>.</p> <p>At 2017/01/31 23:27 <em>team-member-1</em> - terminates the removal, but it’s too late. Of around 300 GB only about 4.5 GB is left</p> <p>We had to bring GitLab.com down and shared this information on Twitter:</p> <div class="center"> <twitterwidget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" data-tweet-id="826572933304827904" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;"></twitterwidget> <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> </div> <h2 id="problems-encountered">Problems Encountered</h2> <ul> <li>LVM snapshots are by default only taken once every 24 hours. <em>Team-member-1</em> happened to run one manually about 6 hours prior to the outage because he was working in load balancing for the database.</li> <li>Regular backups seem to also only be taken once per 24 hours, though <em>team-member-1</em> has not yet been able to figure out where they are stored. According to <em>team-member-2</em> these don’t appear to be working, producing files only a few bytes in size.</li> <li><em>Team-member-3</em>: It looks like <code>pg_dump</code> may be failing because PostgreSQL 9.2 binaries are being run instead of 9.6 binaries. This happens because omnibus only uses Pg 9.6 if data/PG_VERSION is set to 9.6, but on workers this file does not exist. As a result it defaults to 9.2, failing silently. No SQL dumps were made as a result. Fog gem may have cleaned out older backups.</li> <li>Disk snapshots in Azure are enabled for the NFS server, but not for the DB servers.</li> <li>The synchronisation process removes webhooks once it has synchronised data to staging. Unless we can pull these from a regular backup from the past 24 hours they will be lost</li> <li>The replication procedure is super fragile, prone to error, relies on a handful of random shell scripts, and is badly documented</li> <li>Our backups to S3 apparently don’t work either: the bucket is empty</li> <li>So in other words, out of 5 backup/replication techniques deployed none are working reliably or set up in the first place. We ended up restoring a 6 hours old backup.</li> <li>pg_basebackup will silently wait for a master to initiate the replication progress, according to another production engineer this can take up to 10 minutes. This can lead to one thinking the process is stuck somehow. Running the process using “strace” provided no useful information about what might be going on.</li> </ul> <h2 id="recovery">Recovery</h2> <p>We’re working on recovering right now by using a backup of the database from a staging database.</p> <div class="center"> <twitterwidget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-1" data-tweet-id="826591961444384768" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;"></twitterwidget> <script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script> </div> <ul> <li>2017/02/01 00:36 - Backup <code>db1.staging.gitlab.com</code> data</li> <li>2017/02/01 00:55 - Mount <code>db1.staging.gitlab.com</code> on <code>db1.cluster.gitlab.com</code></li> <li>Copy data from staging <code>/var/opt/gitlab/postgresql/data/</code> to production <code>/var/opt/gitlab/postgresql/data/</code></li> <li>2017/02/01 01:05 - <code>nfs-share01</code> server commandeered as temp storage place in <code>/var/opt/gitlab/db-meltdown</code></li> <li>2017/02/01 01:18 - Copy of remaining production data, including <code>pg_xlog</code> tar’ed up as <code>20170131-db-meltodwn-backup.tar.gz</code></li> </ul> <p>Below a graph showing the time of deletion and subsequent copying in of data.</p> <p><img src="./GitLab.com Database Incident _ GitLab_files/delete.png" alt=""></p> <p><a href="https://twitter.com/i/moments/826818668948549632">Also, we'd like to thank the amazing support we've received on Twitter and elsewhere through #hugops</a></p> </div> <div class="social"> <div class="a2a_kit a2a_kit_size_32 a2a_default_style"> <a class="a2a_dd" href="https://www.addtoany.com/share"></a> <a class="a2a_button_facebook"></a> <a class="a2a_button_twitter"></a> <a class="a2a_button_google_plus"></a> </div> <script async="" src="https://static.addtoany.com/menu/page.js"></script> </div> </div> <div class="wrapper signup"> <div class="panel panel-default nl"> <div class="panel-heading col-9"> For the latest and most detailed news follow <strong><a href="https://twitter.com/gitlab">@gitlab</a></strong> on Twitter. <a href="https://gitlab.com/gitlab-com/blog-posts/issues">Future blog posts suggestions</a> <a href="https://about.gitlab.com/atom.xml" class="btn btn-sm btn-default pull-right" data-toggle="tooltip" title="RSS Feed"> <strong>RSS</strong> <i class="fa fa-rss" style="color:orange"></i> </a> </div> <div class="panel-body newsletter"> <span class="newsletter-preamble"> Get our GitLab newsletter twice monthly. </span> <div class="newsletter-form"> <script src="https://app-ab13.marketo.com/js/forms2/js/forms2.min.js"></script> <form id="mktoForm_1077"></form> <script>


        MktoForms2.loadForm("//app-ab13.marketo.com", "194-VVC-221", 1077, function(form) {
          form.onSuccess(function(values, followUpUrl) {

            form.getFormElem().hide();
            document.getElementById('confirmform').style.display = 'block';

            dataLayer.push({event: 'mktoLead',mktoFormId: form.getId()});
            return false;
          });
          function getgacid() {
            try {
              var tracker = ga.getAll()[0];
              return tracker.get('clientId');
            } catch (e) {
              return 'n/a';
            }
          }
          form.vals({
            'gacid': getgacid()
          });
        });
      </script> <div id="confirmform" style="display:none;"><p>Thanks for subscribing!</p></div> </div> </div> </div> </div> <div class="callout"> <h3> Install GitLab in 2 minutes </h3> <h4> With Ubuntu, Debian, CentOS and Raspbian packages or from source </h4> <a class="btn btn-lg btn-red" href="https://about.gitlab.com/downloads/">Install GitLab Now</a> </div> <div class="wrapper comments"> <div id="disqus_thread"><iframe id="dsq-app1" name="dsq-app1" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./GitLab.com Database Incident _ GitLab_files/saved_resource.html" style="width: 1px !important; min-width: 100% !important; border: none !important; overflow: hidden !important; height: 4613px !important;" horizontalscrolling="no" verticalscrolling="no"></iframe><iframe id="indicator-north" name="indicator-north" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 900px !important; border: none !important; overflow: hidden !important; top: 0px !important; min-width: 900px !important; max-width: 900px !important; position: fixed !important; z-index: 2147483646 !important; height: 22px !important; min-height: 22px !important; max-height: 22px !important; display: none !important;" src="./GitLab.com Database Incident _ GitLab_files/saved_resource(1).html"></iframe><iframe id="indicator-south" name="indicator-south" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 900px !important; border: none !important; overflow: hidden !important; bottom: 0px !important; min-width: 900px !important; max-width: 900px !important; position: fixed !important; z-index: 2147483646 !important; height: 22px !important; min-height: 22px !important; max-height: 22px !important; display: none !important;" src="./GitLab.com Database Incident _ GitLab_files/saved_resource(2).html"></iframe></div> </div> <footer class="footer"> <svg width="65" height="60" viewBox="0 0 210 194" class="footer-logo"> <path d="M105.0614,193.655 L105.0614,193.655 L143.7014,74.734 L66.4214,74.734 L105.0614,193.655 L105.0614,193.655 Z" fill="#E24329" class="logo-svg-shape logo-dark-orange-shape"></path> <path d="M105.0614,193.6548 L66.4214,74.7338 L12.2684,74.7338 L105.0614,193.6548 Z" fill="#FC6D26" class="logo-svg-shape logo-orange-shape"></path> <path d="M12.2685,74.7341 L12.2685,74.7341 L0.5265,110.8731 C-0.5445,114.1691 0.6285,117.7801 3.4325,119.8171 L105.0615,193.6551 L12.2685,74.7341 Z" fill="#FCA326" class="logo-svg-shape logo-light-orange-shape"></path> <path d="M12.2685,74.7342 L66.4215,74.7342 L43.1485,3.1092 C41.9515,-0.5768 36.7375,-0.5758 35.5405,3.1092 L12.2685,74.7342 Z" fill="#E24329" class="logo-svg-shape logo-dark-orange-shape"></path> <path d="M105.0614,193.6548 L143.7014,74.7338 L197.8544,74.7338 L105.0614,193.6548 Z" fill="#FC6D26" class="logo-svg-shape logo-orange-shape"></path> <path d="M197.8544,74.7341 L197.8544,74.7341 L209.5964,110.8731 C210.6674,114.1691 209.4944,117.7801 206.6904,119.8171 L105.0614,193.6551 L197.8544,74.7341 Z" fill="#FCA326" class="logo-svg-shape logo-light-orange-shape"></path> <path d="M197.8544,74.7342 L143.7014,74.7342 L166.9744,3.1092 C168.1714,-0.5768 173.3854,-0.5758 174.5824,3.1092 L197.8544,74.7342 Z" fill="#E24329" class="logo-svg-shape logo-dark-orange-shape"></path> </svg> <div class="animated container"> <ul class="text-center footer-social"> <li> <a href="https://twitter.com/gitlab"><i class="fa fa-twitter"></i> <span class="sr-only">Twitter</span> </a></li> <li> <a href="https://www.facebook.com/gitlab"><i class="fa fa-facebook"></i> <span class="sr-only">Facebook</span> </a></li> <li> <a href="https://www.youtube.com/channel/UCnMGQ8QHMAnVIsI3xJrihhg"><i class="fa fa-youtube"></i> <span class="sr-only">YouTube</span> </a></li> <li> <a href="https://www.linkedin.com/company/gitlab-com"><i class="fa fa-linkedin"></i> <span class="sr-only">LinkedIn</span> </a></li> </ul> <div class="row"> <div class="col-sm-6 col-md-3 col-lg-2 col-lg-offset-2 footer-link-holder"> <h3 class="footer-link-title">Products</h3> <ul class="animated footer-links"> <li><a href="https://about.gitlab.com/products">Community Edition</a></li> <li><a href="https://about.gitlab.com/gitlab-ee">Enterprise Edition</a></li> <li><a href="https://about.gitlab.com/gitlab-com/">GitLab.com</a></li> <li><a href="https://githost.io/">GitLab Hosted</a></li> </ul> </div> <div class="col-sm-6 col-md-3 col-lg-2 footer-link-holder"> <h3 class="footer-link-title">Services</h3> <ul class="animated footer-links"> <li><a href="https://about.gitlab.com/products/">Products</a></li> <li><a href="https://about.gitlab.com/resellers/">Resellers</a></li> <li><a href="https://about.gitlab.com/consultancy/">Consultancy</a></li> <li><a href="https://about.gitlab.com/development/">Development</a></li> <li><a href="https://about.gitlab.com/training/">Training</a></li> </ul> </div> <div class="col-sm-6 col-md-3 col-lg-2 footer-link-holder"> <h3 class="footer-link-title">Community</h3> <ul class="animated footer-links"> <li><a href="https://gitlab.com/groups/gitlab-org">Source Code</a></li> <li><a href="https://about.gitlab.com/core-team/">Core Team</a></li> <li><a href="http://contributors.gitlab.com/">Contributors</a></li> <li><a href="https://docs.gitlab.com/">Documentation</a></li> <li><a href="https://about.gitlab.com/getting-help/">Getting Help</a></li> <li><a href="https://about.gitlab.com/contributing/">Contributing</a></li> <li><a href="https://about.gitlab.com/applications/">Applications</a></li> <li><a href="https://about.gitlab.com/mvp/">Hall of Fame</a></li> </ul> </div> <div class="col-sm-6 col-md-3 col-lg-2 footer-link-holder"> <h3 class="footer-link-title">Company</h3> <ul class="animated footer-links"> <li><a href="https://about.gitlab.com/blog/">Blog</a></li> <li><a href="https://about.gitlab.com/press/">Press and Logos</a></li> <li><a href="https://about.gitlab.com/about/">About Us</a></li> <li><a href="https://about.gitlab.com/team/">Team</a></li> <li> <a href="https://about.gitlab.com/jobs/">21 Open Jobs </a></li> <li><a href="https://about.gitlab.com/terms/">Terms</a></li> <li><a href="https://about.gitlab.com/contact/">Contact Us</a></li> </ul> </div> </div> </div> </footer> <div class="animated text-center source-link"> This page is generated from <a href="https://gitlab.com/gitlab-com/www-gitlab-com/blob/master/source/posts/2017-02-01-gitlab-dot-com-database-incident.html.md" class="external-source-link">a public file on GitLab.com</a> — merge requests with improvements are <a href="https://gitlab.com/gitlab-com/www-gitlab-com/blob/master/CONTRIBUTING.md" class="external-source-link">very welcome</a>. <a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="license"> <img src="./GitLab.com Database Incident _ GitLab_files/by-sa.svg" alt="Creative Commons License"> </a> </div> <script src="./GitLab.com Database Incident _ GitLab_files/jquery.min.js"></script> <script src="./GitLab.com Database Incident _ GitLab_files/bootstrap.min.js"></script> <script src="./GitLab.com Database Incident _ GitLab_files/jqBootstrapValidation.js"></script> <script src="./GitLab.com Database Incident _ GitLab_files/scripts.js"></script> <script>
  $.ajax({
    url: '//munchkin.marketo.net/munchkin.js',
    dataType: 'script',
    cache: true,
    success: function() {
      Munchkin.init('194-VVC-221');
    }
  });
</script> <script>
  var google_conversion_id = 968513482;
  var google_conversion_label = "a-CXCPqluQUQlqi33AM";
  var google_custom_params = window.google_tag_params;
  var google_remarketing_only = true;
</script> <script src="https://www.googleadservices.com/pagead/conversion.js">
<![CDATA[
]]>
</script> <noscript> &lt;div style='display:inline;'&gt; &lt;img alt='' height=1 src='//googleads.g.doubleclick.net/pagead/viewthroughconversion/968513482/?value=0&amp;amp;guid=ON&amp;amp;script=0' style='border-style:none;' width=1&gt; &lt;/div&gt; </noscript> <script src="https://platform.twitter.com/oct.js"></script> <script>
  twttr.conversion.trackPid('nufbg', { tw_sale_amount: 0, tw_order_quantity: 0 });
</script> <noscript> &lt;img alt='' height=1 src='https://analytics.twitter.com/i/adsct?txn_id=nufbg&amp;amp;p_id=Twitter&amp;amp;tw_sale_amount=0&amp;amp;tw_order_quantity=0' style='display:none;' width=1&gt; &lt;img alt='' height=1 src='//t.co/i/adsct?txn_id=nufbg&amp;amp;p_id=Twitter&amp;amp;tw_sale_amount=0&amp;amp;tw_order_quantity=0' style='display:none;' width=1&gt; </noscript> <script>
  !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
  n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
  document,'script','//connect.facebook.net/en_US/fbevents.js');
  
  fbq('init', '1689559637958103');
  fbq('track', "PageView");
</script> <noscript> &lt;img height=1 src='https://www.facebook.com/tr?id=1689559637958103&amp;amp;ev=PageView&amp;amp;noscript=1' style='display:none' width=1&gt; </noscript> <script>
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','Z4n7msKyctXXfJs66EKx','2.0.0');
</script> <div class="sticky-banner js-sticky-banner active"> <div class="sticky-banner-content"> <div class="sticky-banner-text"> <p class="header-text"> Try <a href="https://about.gitlab.com/features/#enterprise">GitLab Enterprise Edition</a> risk-free for 30 days. </p> <p class="subheader-text"> No credit card required. Have questions? <a class="contact-us" href="https://about.gitlab.com/sales/">Contact us.</a> </p> </div> <div class="action"> <a class="btn featured-item-button" href="https://about.gitlab.com/free-trial/">Get Your Free Trial Today</a> </div> </div> </div> </div>  <iframe style="display: none;" src="./GitLab.com Database Incident _ GitLab_files/saved_resource(3).html"></iframe><div class="st-injected-content-generated st-install-Z4n7msKyctXXfJs66EKx" data-st-install-key="Z4n7msKyctXXfJs66EKx" id="st-injected-content">
<div class="st-ui-embed st-search-chrome-overlay-output st-search-escape-hide-outputs st-search-zoom-on-mobile" style="display: none;">
    <div class="st-ui-overlay st-search-hide-outputs"></div>
  <!-- Swiftype input and results overlay -->
  <div class="st-ui-container st-ui-container-overlay  st-ui-injected-overlay-container ">
    <!-- HEADER -->
    <div class="st-ui-container-header_bar st-position-container">
        <section class="st-ui-header">
          <form lpformnum="1">
            <input class="st-default-search-input st-search-set-focus" type="text" value="" placeholder="Search this site" id="st-overlay-search-input" autocomplete="off" autocorrect="off" autocapitalize="off">
          </form>
          <span class="st-ui-search-icon"></span>

            <a class="st-ui-close-button st-search-hide-outputs">Close</a>

        </section>
    </div>

    <!-- LEFT SIDEBAR -->
    <div class="st-ui-container-left_sidebar st-position-container">
      <div class="st-ui-injected-search-controls">
      </div>
    </div>

    <!-- RIGHT SIDEBAR -->
    <div class="st-ui-container-right_sidebar st-position-container">
      <div class="st-ui-injected-container-right_sidebar">
        <div class="st-ui-injected-search-controls">
        </div>
      </div>
    </div>

    <!-- PRIMARY CONTENT -->
    <div class="st-ui-container-primary_content st-position-container">
        <section class="st-ui-slide-autocomplete st-autocomplete-keyboard-navigable st-autocomplete-transient-on-select-and-results" data-st-target-element="#st-overlay-search-input" data-st-active-query-class="active" style="display: none;">
          <span class="st-ui-type-heading-small">suggested results</span>
          <div class="st-autocomplete-results"><div class="st-query-present" style="display: none;"></div></div>
        </section>

        <section class="st-ui-content st-search-results"><div class="st-query-not-present">
          <span class="st-ui-fallback"></span>
        </div><div class="st-query-present" style="display: none;"></div></section>

      <section class="st-ui-no-results st-search-suggestions"><div class="st-query-not-present">
      </div></section>
    </div>



    <!-- FOOTER -->
    <div class="st-ui-container-footer_bar st-position-container">
      <section class="st-ui-footer">
          <span class="st-ui-search-summary st-search-summary"></span>
        <span class="st-ui-pagination st-search-pagination"></span>
      </section>
    </div>
  </div>
</div>
<div class="st-default-autocomplete" data-st-target-element=".st-default-search-input" style="display: none; position: absolute; top: 49px; left: 0px; z-index: 999999;">
  <div class="st-autocomplete-results st-ui-autocomplete"><div class="st-query-present" style="display: none;"></div></div>
</div>
</div><script aria-hidden="true" type="application/x-lastpass" id="hiddenlpsubmitdiv" style="display: none;"></script><script>try{(function() { for(var lastpass_iter=0; lastpass_iter < document.forms.length; lastpass_iter++){ var lastpass_f = document.forms[lastpass_iter]; if(typeof(lastpass_f.lpsubmitorig2)=="undefined"){ lastpass_f.lpsubmitorig2 = lastpass_f.submit; if (typeof(lastpass_f.lpsubmitorig2)=='object'){ continue;}lastpass_f.submit = function(){ var form=this; var customEvent = document.createEvent("Event"); customEvent.initEvent("lpCustomEvent", true, true); var d = document.getElementById("hiddenlpsubmitdiv"); if (d) {for(var i = 0; i < document.forms.length; i++){ if(document.forms[i]==form){ if (typeof(d.innerText) != 'undefined') { d.innerText=i.toString(); } else { d.textContent=i.toString(); } } } d.dispatchEvent(customEvent); }form.lpsubmitorig2(); } } }})()}catch(e){}</script><iframe id="rufous-sandbox" scrolling="no" frameborder="0" allowtransparency="true" allowfullscreen="true" style="position: absolute; visibility: hidden; display: none; width: 0px; height: 0px; padding: 0px; border: none;" title="Twitter analytics iframe" src="./GitLab.com Database Incident _ GitLab_files/saved_resource(4).html"></iframe></body><span class="gr__tooltip"><span class="gr__tooltip-content"></span><i class="gr__tooltip-logo"></i><span class="gr__triangle"></span></span><div></div></html>